var ModulesJS;!function(a){!function(a){!function(a){"use strict"}(a.Abstract||(a.Abstract={}))}(a.Core||(a.Core={}))}(ModulesJS||(ModulesJS={}));var ModulesJS;!function(a){!function(a){!function(a){"use strict";var b=function(){function a(){}return a.MODULE_JS_ATTRIBUTE_NAME="data-module",a}();a.Common=b}(a.Constants||(a.Constants={}))}(a.Core||(a.Core={}))}(ModulesJS||(ModulesJS={}));var ModulesJS;!function(a){!function(a){!function(b){"use strict";var c=function(){function b(){}return b.prototype.create=function(b,c){var d=b.getAttribute(a.Constants.Common.MODULE_JS_ATTRIBUTE_NAME),e=Utils.Activator.tryCreateInstanceWithinNamespaces(d,c);if(null==e)throw new Error("The module with name ["+d+"] couldn't be created within these namespaces ["+c.join(", ")+"]");return e},b}();b.ModuleFactory=c}(a.Factories||(a.Factories={}))}(a.Core||(a.Core={}))}(ModulesJS||(ModulesJS={}));var ModulesJS;!function(a){!function(a){!function(b){"use strict";var c={namespaces:[],moduleFactory:new a.Factories.ModuleFactory},d=function(){function b(){this._instanceMap=new Map,this._mutationObserver=new MutationObserver(this._onDomMutatedEventHandler.bind(this))}return Object.defineProperty(b.prototype,"moduleFactory",{get:function(){return this._options.moduleFactory},enumerable:!0,configurable:!0}),b.prototype.configure=function(a){return this._options=Object.assign({},c,a),this},b.prototype.init=function(){this.initAndLoadModulesInDOM(),this._mutationObserver.observe(document.body,{childList:!0,subtree:!0})},b.prototype.initAndLoadModulesInDOM=function(){this.createAllModules(),this.loadModules()},b.prototype.createModule=function(a){if(this.isModule(a)&&!this._instanceMap.has(a)){var b=this.moduleFactory.create(a,this._options.namespaces);return b.init(a),this._instanceMap.set(a,{element:a,module:b,children:this._getAllModuleElements(a),loaded:!1}),!0}return!1},b.prototype.createAllModules=function(a){var b=this;void 0===a&&(a=document.body),this._getAllModuleElements(a,!0).forEach(function(a){return b.createModule(a)})},b.prototype.loadModules=function(){this._instanceMap.forEach(function(a,b){!1===a.loaded&&(a.module.onLoad(),a.loaded=!0)})},b.prototype.disposeModulesNotInDOM=function(){var a=this,b=[];this._instanceMap.forEach(function(a,c){document.body.contains(a.element)||(a.module.dispose(),b.push(a))}),b.forEach(function(b){return a._instanceMap.delete(b.element)})},b.prototype.isModule=function(b){return null!=b&&b.hasAttribute(a.Constants.Common.MODULE_JS_ATTRIBUTE_NAME)},b.prototype._getAllModuleElements=function(b,c){void 0===b&&(b=document.body),void 0===c&&(c=!1);var d=b.querySelectorAll("["+a.Constants.Common.MODULE_JS_ATTRIBUTE_NAME+"]"),e=Array.from(d);return!0===c&&this.isModule(b)&&e.unshift(b),e||[]},b.prototype._onDomMutatedEventHandler=function(a,b){this.initAndLoadModulesInDOM(),this.disposeModulesNotInDOM()},b.instance=new b,b}();b.ModuleManager=d}(a.Managers||(a.Managers={}))}(a.Core||(a.Core={}))}(ModulesJS||(ModulesJS={}));